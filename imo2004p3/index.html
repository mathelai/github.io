<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IMO 2004 P3 Simulation</title>
    <link rel="stylesheet" href="../tokens.css">
    <link rel="stylesheet" href="../base.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: var(--font-family);
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333;
            padding: 20px;
            min-height: 100vh;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            overflow: hidden;
        }

        header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .subtitle {
            font-size: 1.1em;
            opacity: 0.9;
        }

        .content {
            padding: 30px;
        }

        .section {
            margin-bottom: 40px;
        }

        .section h2 {
            color: #667eea;
            margin-bottom: 15px;
            font-size: 1.8em;
            border-bottom: 3px solid #667eea;
            padding-bottom: 10px;
        }

        .problem-statement {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            border-left: 5px solid #667eea;
            font-size: 1.1em;
            line-height: 1.6;
        }

        .controls {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            align-items: center;
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
        }

        .control-group {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        label {
            font-weight: 600;
            color: #555;
        }

        input[type="number"] {
            width: 80px;
            padding: 8px;
            border: 2px solid #ddd;
            border-radius: 5px;
            font-size: 1em;
        }

        button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 10px 25px;
            border-radius: 5px;
            font-size: 1em;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        button:active {
            transform: translateY(0);
        }

        .visualization-area {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
        }

        @media (max-width: 1000px) {
            .visualization-area {
                grid-template-columns: 1fr;
            }
        }

        .viz-panel {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
        }

        .viz-panel h3 {
            color: #667eea;
            margin-bottom: 15px;
            font-size: 1.3em;
        }

        .grid-container {
            display: inline-block;
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .grid {
            display: grid;
            gap: 2px;
            background: #333;
            border: 2px solid #333;
        }

        .cell {
            width: 30px;
            height: 30px;
            background: white;
            transition: background-color 0.3s;
        }

        .cell.filled {
            background: #667eea;
        }

        .hook-display {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            margin-top: 15px;
        }

        .hook {
            background: white;
            padding: 10px;
            border-radius: 5px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }

        .hook-title {
            font-size: 0.9em;
            color: #666;
            margin-bottom: 5px;
            text-align: center;
        }

        .results-panel {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
        }

        .status {
            padding: 15px;
            border-radius: 5px;
            margin: 10px 0;
            font-weight: 600;
        }

        .status.success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .status.failure {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }

        .status.info {
            background: #d1ecf1;
            color: #0c5460;
            border: 1px solid #bee5eb;
        }

        .data-summary {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .stat-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            text-align: center;
        }

        .stat-value {
            font-size: 2.5em;
            font-weight: bold;
            color: #667eea;
            margin: 10px 0;
        }

        .stat-label {
            color: #666;
            font-size: 0.9em;
        }

        .conjecture-box {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 25px;
            border-radius: 10px;
            margin-top: 20px;
            font-size: 1.1em;
            line-height: 1.6;
        }

        .conjecture-box h3 {
            margin-bottom: 15px;
            font-size: 1.4em;
        }

        .table-container {
            overflow-x: auto;
            margin-top: 15px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            background: white;
            border-radius: 10px;
            overflow: hidden;
        }

        th, td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }

        th {
            background: #667eea;
            color: white;
            font-weight: 600;
        }

        tr:hover {
            background: #f8f9fa;
        }

        .tileable {
            color: #28a745;
            font-weight: 600;
        }

        .not-tileable {
            color: #dc3545;
            font-weight: 600;
        }
            /* Motion preferences */
        @media (prefers-reduced-motion: reduce) {
            *, *::before, *::after {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
        }
        </style>
</head>
<body>
  <a class="skip-link" href="#main">Skip to content</a>
    <main id="main">
  <div class="container">
        <header>
            <h1>IMO 2004 Problem 3</h1>
            <p>Hook Tiling Rectangle Classification</p>
        </header>

        <div class="content">
            <!-- Problem Statement -->
            <div class="section">
                <h2 id="problem-title">Problem Statement</h2>
                <section aria-labelledby="problem-title">
  <div class="problem-statement">
                    <p><strong>Define a hook</strong> to be a figure made up of six unit squares as shown below,
                    or any of the figures obtained by applying rotations and reflections to this figure.</p>
                    <p style="margin-top: 15px;"><strong>Determine all m Ã— n rectangles</strong> that can be covered without gaps and without overlaps with hooks,
                    such that no part of a hook covers area outside the rectangle.</p>
                </div>
            </div>

            <!-- Hook Shapes -->
            <div class="section">
                <h2>Hook Orientations</h2>
                <div class="viz-panel">
                    <p>A hook consists of 6 unit squares. Here are all unique orientations:</p>
                    <div id="hook-shapes" class="hook-display"></div>
                </div>
            </div>

            <!-- Interactive Simulation -->
            <div class="section">
                <h2>Interactive Simulation</h2>
                <div class="controls">
                    <div class="control-group">
                        <label for="rows">Rows (m):</label>
                        <input type="number" id="rows" min="1" max="15" value="4">
                    </div>
                    <div class="control-group">
                        <label for="cols">Columns (n):</label>
                        <input type="number" id="cols" min="1" max="15" value="6">
                    </div>
                    <button onclick="attemptTiling()">Attempt Tiling</button>
                    <button onclick="clearGrid()">Clear</button>
                </div>

                <div class="visualization-area">
                    <div class="viz-panel">
                        <h3>Rectangle Grid</h3>
                        <div class="grid-container">
                            <div id="main-grid" class="grid"></div>
                        </div>
                        <div id="grid-info" style="margin-top: 15px;"></div>
                    </div>

                    <div class="viz-panel">
                        <h3>Tiling Result</h3>
                        <div id="tiling-status"></div>
                        <div id="tiling-details"></div>
                    </div>
                </div>
            </div>

            <!-- Simulation Results -->
            <div class="section">
                <h2>Ground Truth Data (Simulation Results)</h2>
                <div class="results-panel">
                    <div class="data-summary" id="summary-stats"></div>
                    <div id="conjecture-display"></div>
                    <div class="table-container">
                        <h3 style="margin: 20px 0 10px 0; color: #667eea;">Test Results</h3>
                        <div id="results-table"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    </main>
  <script>
        // Embedded results data (from simulation)
        const RESULTS_DATA = {
  "problem": "Determine all mÃ—n rectangles that can be tiled with hooks",
  "hook_description": "A hook is made of 6 unit squares in an L-shape",
  "total_tested": 55,
  "tileable_count": 0,
  "not_tileable_count": 55,
  "tileable_rectangles": [],
  "not_tileable_rectangles": [
    {"m": 1, "n": 1, "reason": "Area not divisible by 6"},
    {"m": 1, "n": 2, "reason": "Area not divisible by 6"},
    {"m": 1, "n": 3, "reason": "Area not divisible by 6"},
    {"m": 1, "n": 4, "reason": "Area not divisible by 6"},
    {"m": 1, "n": 5, "reason": "Area not divisible by 6"},
    {"m": 1, "n": 6, "reason": "No tiling found"},
    {"m": 1, "n": 7, "reason": "Area not divisible by 6"},
    {"m": 1, "n": 8, "reason": "Area not divisible by 6"},
    {"m": 1, "n": 9, "reason": "Area not divisible by 6"},
    {"m": 1, "n": 10, "reason": "Area not divisible by 6"},
    {"m": 2, "n": 2, "reason": "Area not divisible by 6"},
    {"m": 2, "n": 3, "reason": "No tiling found"},
    {"m": 2, "n": 4, "reason": "Area not divisible by 6"},
    {"m": 2, "n": 5, "reason": "Area not divisible by 6"},
    {"m": 2, "n": 6, "reason": "No tiling found"},
    {"m": 2, "n": 7, "reason": "Area not divisible by 6"},
    {"m": 2, "n": 8, "reason": "Area not divisible by 6"},
    {"m": 2, "n": 9, "reason": "No tiling found"},
    {"m": 2, "n": 10, "reason": "Area not divisible by 6"},
    {"m": 3, "n": 3, "reason": "Area not divisible by 6"},
    {"m": 3, "n": 4, "reason": "No tiling found"},
    {"m": 3, "n": 5, "reason": "Area not divisible by 6"},
    {"m": 3, "n": 6, "reason": "No tiling found"},
    {"m": 3, "n": 7, "reason": "Area not divisible by 6"},
    {"m": 3, "n": 8, "reason": "No tiling found"},
    {"m": 3, "n": 9, "reason": "Area not divisible by 6"},
    {"m": 3, "n": 10, "reason": "No tiling found"},
    {"m": 4, "n": 4, "reason": "Area not divisible by 6"},
    {"m": 4, "n": 5, "reason": "Area not divisible by 6"},
    {"m": 4, "n": 6, "reason": "No tiling found"},
    {"m": 4, "n": 7, "reason": "Area not divisible by 6"},
    {"m": 4, "n": 8, "reason": "Area not divisible by 6"},
    {"m": 4, "n": 9, "reason": "No tiling found"},
    {"m": 4, "n": 10, "reason": "Area not divisible by 6"},
    {"m": 5, "n": 5, "reason": "Area not divisible by 6"},
    {"m": 5, "n": 6, "reason": "No tiling found"},
    {"m": 5, "n": 7, "reason": "Area not divisible by 6"},
    {"m": 5, "n": 8, "reason": "Area not divisible by 6"},
    {"m": 5, "n": 9, "reason": "Area not divisible by 6"},
    {"m": 5, "n": 10, "reason": "Area not divisible by 6"},
    {"m": 6, "n": 6, "reason": "No tiling found"},
    {"m": 6, "n": 7, "reason": "No tiling found"},
    {"m": 6, "n": 8, "reason": "No tiling found"},
    {"m": 6, "n": 9, "reason": "No tiling found"},
    {"m": 6, "n": 10, "reason": "No tiling found"},
    {"m": 7, "n": 7, "reason": "Area not divisible by 6"},
    {"m": 7, "n": 8, "reason": "Area not divisible by 6"},
    {"m": 7, "n": 9, "reason": "Area not divisible by 6"},
    {"m": 7, "n": 10, "reason": "Area not divisible by 6"},
    {"m": 8, "n": 8, "reason": "Area not divisible by 6"},
    {"m": 8, "n": 9, "reason": "No tiling found"},
    {"m": 8, "n": 10, "reason": "Area not divisible by 6"},
    {"m": 9, "n": 9, "reason": "Area not divisible by 6"},
    {"m": 9, "n": 10, "reason": "No tiling found"},
    {"m": 10, "n": 10, "reason": "Area not divisible by 6"}
  ],
  "patterns": {
    "observations": [
      {"type": "modulo_2", "tileable_cases": []},
      {"type": "modulo_3", "tileable_cases": []}
    ],
    "min_tileable_dimension": null,
    "3Ã—2k_rectangles": [],
    "2Ã—3k_rectangles": []
  },
  "conjecture": "Based on the simulation, it appears that NO mÃ—n rectangle can be tiled with hooks of this shape. The answer may be that no such rectangles exist, or only very specific large rectangles can be tiled."
};

        // Hook orientations
        const HOOKS = [
            [[0, 0], [0, 1], [1, 0], [2, 0], [3, 0], [3, 1]],
            [[0, 0], [0, 1], [0, 2], [0, 3], [1, 0], [1, 3]],
            [[0, 0], [0, 1], [1, 1], [2, 1], [3, 0], [3, 1]],
            [[0, 0], [0, 3], [1, 0], [1, 1], [1, 2], [1, 3]]
        ];

        // Display hook shapes
        function displayHookShapes() {
            const container = document.getElementById('hook-shapes');
            container.innerHTML = '';

            HOOKS.forEach((hook, index) => {
                const maxR = Math.max(...hook.map(c => c[0]));
                const maxC = Math.max(...hook.map(c => c[1]));

                const hookDiv = document.createElement('div');
                hookDiv.className = 'hook';

                const title = document.createElement('div');
                title.className = 'hook-title';
                title.textContent = `Orientation ${index + 1}`;
                hookDiv.appendChild(title);

                const grid = document.createElement('div');
                grid.className = 'grid';
                grid.style.gridTemplateColumns = `repeat(${maxC + 1}, 25px)`;
                grid.style.gridTemplateRows = `repeat(${maxR + 1}, 25px)`;

                for (let r = 0; r <= maxR; r++) {
                    for (let c = 0; c <= maxC; c++) {
                        const cell = document.createElement('div');
                        cell.className = 'cell';
                        cell.style.width = '25px';
                        cell.style.height = '25px';

                        if (hook.some(([hr, hc]) => hr === r && hc === c)) {
                            cell.classList.add('filled');
                        }

                        grid.appendChild(cell);
                    }
                }

                hookDiv.appendChild(grid);
                container.appendChild(hookDiv);
            });
        }

        // Create grid
        function createGrid(rows, cols) {
            const grid = document.getElementById('main-grid');
            grid.innerHTML = '';
            grid.style.gridTemplateColumns = `repeat(${cols}, 30px)`;
            grid.style.gridTemplateRows = `repeat(${rows}, 30px)`;

            for (let i = 0; i < rows * cols; i++) {
                const cell = document.createElement('div');
                cell.className = 'cell';
                cell.dataset.index = i;
                grid.appendChild(cell);
            }

            updateGridInfo(rows, cols);
        }

        function updateGridInfo(rows, cols) {
            const area = rows * cols;
            const divisibleBy6 = area % 6 === 0;
            const numHooks = area / 6;

            const info = document.getElementById('grid-info');
            info.innerHTML = `
                <strong>Rectangle:</strong> ${rows} Ã— ${cols}<br>
                <strong>Area:</strong> ${area} square units<br>
                <strong>Divisible by 6:</strong> ${divisibleBy6 ? 'Yes' : 'No'}<br>
                ${divisibleBy6 ? `<strong>Would need:</strong> ${numHooks} hook${numHooks !== 1 ? 's' : ''}` : ''}
            `;
        }

        // Attempt tiling (simplified - shows whether it's theoretically possible)
        function attemptTiling() {
            const rows = parseInt(document.getElementById('rows').value);
            const cols = parseInt(document.getElementById('cols').value);

            if (rows < 1 || cols < 1 || rows > 15 || cols > 15) {
                alert('Please enter valid dimensions (1-15)');
                return;
            }

            createGrid(rows, cols);

            const area = rows * cols;
            const statusDiv = document.getElementById('tiling-status');
            const detailsDiv = document.getElementById('tiling-details');

            // Check if we have this result in our data
            const tested = RESULTS_DATA.not_tileable_rectangles.find(
                r => (r.m === rows && r.n === cols) || (r.m === cols && r.n === rows)
            ) || RESULTS_DATA.tileable_rectangles.find(
                r => (r.m === rows && r.n === cols) || (r.m === cols && r.n === rows)
            );

            if (area % 6 !== 0) {
                statusDiv.innerHTML = '<div class="status failure">NOT TILEABLE</div>';
                detailsDiv.innerHTML = `
                    <p style="margin-top: 10px;"><strong>Reason:</strong> Area (${area}) is not divisible by 6.</p>
                    <p>Since each hook covers exactly 6 unit squares, the total area must be a multiple of 6.</p>
                `;
            } else {
                const numHooks = area / 6;

                if (tested && tested.reason === "No tiling found") {
                    statusDiv.innerHTML = '<div class="status failure">NOT TILEABLE</div>';
                    detailsDiv.innerHTML = `
                        <p style="margin-top: 10px;"><strong>Simulation result:</strong> Despite having area ${area} (divisible by 6),
                        no valid tiling with ${numHooks} hook${numHooks !== 1 ? 's' : ''} was found.</p>
                        <p style="margin-top: 10px;"><em>This suggests that divisibility by 6 is necessary but not sufficient for tileability.</em></p>
                    `;
                } else {
                    statusDiv.innerHTML = '<div class="status info">AREA DIVISIBLE BY 6</div>';
                    detailsDiv.innerHTML = `
                        <p style="margin-top: 10px;"><strong>Area:</strong> ${area} = 6 Ã— ${numHooks}</p>
                        <p>This rectangle satisfies the necessary condition (area divisible by 6).</p>
                        <p style="margin-top: 10px;"><em>Note: This ${rows}Ã—${cols} rectangle was not in our test range.
                        Based on patterns from tested rectangles, it likely cannot be tiled.</em></p>
                    `;
                }
            }
        }

        function clearGrid() {
            const cells = document.querySelectorAll('.cell');
            cells.forEach(cell => cell.classList.remove('filled'));
            document.getElementById('tiling-status').innerHTML = '';
            document.getElementById('tiling-details').innerHTML = '';
        }

        // Display results summary
        function displayResults() {
            const summaryDiv = document.getElementById('summary-stats');
            summaryDiv.innerHTML = `
                <div class="stat-card">
                    <div class="stat-label">Total Tested</div>
                    <div class="stat-value">${RESULTS_DATA.total_tested}</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">Tileable</div>
                    <div class="stat-value" style="color: #28a745;">${RESULTS_DATA.tileable_count}</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">Not Tileable</div>
                    <div class="stat-value" style="color: #dc3545;">${RESULTS_DATA.not_tileable_count}</div>
                </div>
            `;

            const conjectureDiv = document.getElementById('conjecture-display');
            conjectureDiv.innerHTML = `
                <div class="conjecture-box">
                    <h3>Conjectured Answer</h3>
                    <p>${RESULTS_DATA.conjecture}</p>
                    <p style="margin-top: 15px;"><strong>Key Observation:</strong> Among all rectangles tested (up to 10Ã—10),
                    NONE could be tiled with hooks, even when the area was divisible by 6.</p>
                    <p style="margin-top: 10px;"><strong>Conclusion:</strong> The answer to the problem is likely that
                    <em>no mÃ—n rectangle can be tiled with hooks</em>, or only very specific large rectangles (if any) can be tiled.</p>
                </div>
            `;

            // Results table
            const tableDiv = document.getElementById('results-table');
            let tableHTML = '<table><thead><tr><th>Dimensions (mÃ—n)</th><th>Area</th><th>Divisible by 6?</th><th>Result</th><th>Reason</th></tr></thead><tbody>';

            const allRectangles = [...RESULTS_DATA.tileable_rectangles, ...RESULTS_DATA.not_tileable_rectangles]
                .filter(r => r.m * r.n % 6 === 0)  // Show only those with area divisible by 6
                .sort((a, b) => a.m * a.n - b.m * b.n);

            allRectangles.forEach(rect => {
                const area = rect.m * rect.n;
                const divisible = area % 6 === 0;
                const tileable = rect.reason !== "No tiling found" && rect.reason !== "Area not divisible by 6";

                tableHTML += `
                    <tr>
                        <td>${rect.m} Ã— ${rect.n}</td>
                        <td>${area}</td>
                        <td>${divisible ? 'Yes' : 'No'}</td>
                        <td class="${tileable ? 'tileable' : 'not-tileable'}">${tileable ? 'Tileable' : 'Not Tileable'}</td>
                        <td>${rect.reason}</td>
                    </tr>
                `;
            });

            tableHTML += '</tbody></table>';
            tableDiv.innerHTML = tableHTML;
        }

        // Initialize
        window.onload = function() {
            displayHookShapes();
            createGrid(4, 6);
            displayResults();
        };
    </script>
</body>
</html>
